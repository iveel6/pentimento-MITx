<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
        <script src="renderer.js"></script>
        <script src="diffra.js"></script>
        <script src="preprocessor.js"></script>
    </head>
    <body>
        <canvas width=1000 height=750></canvas>
    </body>
    <script>
        $(document).ready(function() {
            var initialLength = 0;
            for(var i=0; i<lecture.visuals.length; i++)
                initialLength += lecture.visuals[i].vertices.length;
            
            preprocess(lecture, 1);
            
            var finalLength = 0;
            for(var i=0; i<lecture.visuals.length; i++)
                finalLength += lecture.visuals[i].vertices.length;
            
            console.log(initialLength, finalLength);
            
            var canvas = $('canvas')[0];
            var renderer = PentimentoRenderer();
            
            var startTime = Date.now();
            
            function animate() {
                var time = Date.now()-startTime;
                renderer.renderFrame(lecture, canvas, time/1000);
                window.webkitRequestAnimationFrame(animate);
            }
            
            window.webkitRequestAnimationFrame(animate);
        });
    </script>
</html>